// DOM Connection
// Click generate password button functionality
var generateBtn = document.querySelector("#generate");
generateBtn.addEventListener("click", writePassword);

// Writes the password to the textarea
function writePassword(){
    var password = genPassword();
    var passwordText = document.querySelector("#password");
    passwordText.value = password;
}

// Checkbox functionality
// Define check variables in global scope
var lowercaseCheck;
var uppercaseCheck;
var numberCheck;
var symbolCheck;
// Length of password value
var passwordLength;

// Function to check if checkbox is checked off (checked = true)
function parameterChecks(){
    passwordLength = document.getElementById("length").value;
    lowercaseCheck = document.getElementById("lowercase").checked;
    uppercaseCheck = document.getElementById("uppercase").checked;
    numberCheck = document.getElementById("number").checked;
    symbolCheck = document.getElementById("symbol").checked;
}

// Random password generation functionality 
// Define arrays and final password string
var passwordGenArray;
var finalPasswordArray;
var finalPassword;

// Randomize password selection array
function randomizeArray(){
    // Array for generated characters
    passwordGenArray = [];
    // Adds to passwordGenArray based on checkboxes
    if (lowercaseCheck === true){
        passwordGenArray.push(getRandomLowerCase());
    }
    if (uppercaseCheck === true){
        passwordGenArray.push(getRandomUpperCase());
    }
    if (numberCheck === true){
        passwordGenArray.push(getRandomNumber());
    }    
    if (symbolCheck === true){
        passwordGenArray.push(getRandomSpecial());
    }
    // Functions for generating characters
    function getRandomLowerCase(){
        return String.fromCharCode(Math.floor(Math.random()*26)+97);
    }
    function getRandomUpperCase(){
        return String.fromCharCode(Math.floor(Math.random()*26)+65);
    }
    function getRandomNumber(){
        return String.fromCharCode(Math.floor(Math.random()*10)+48);
    }
    function getRandomSpecial(){
        var symbol = "!@#$%^&*(){}[]=<>/,.|~?";
        return symbol[Math.floor(Math.random()*symbol.length)];
    }
}

// Loops to generate password from array generated by randomizeArray()
function genPassword(){
    parameterChecks();
    finalPasswordArray = [];
    for (var i = 0; i < passwordLength; i++){
        randomizeArray();
        finalPasswordArray.push(passwordGenArray[Math.floor(Math.random()*passwordGenArray.length)]);
    }
    var finalPassword = finalPasswordArray.join("");
    return finalPassword;
}